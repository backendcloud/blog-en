<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Github Action Upgrade backend cloud website CICD process - English version of the website https://www.backendcloud.cn/</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');
                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }
                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../SUMMARY.html"><strong aria-hidden="true">1.</strong> Catalog: Cloud Native</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../cloud-native/cilium-replace-kube-proxy.html"><strong aria-hidden="true">1.1.</strong> Cilium completely replaces kube-proxy</a></li><li class="chapter-item expanded "><a href="../cloud-native/cilium-install.html"><strong aria-hidden="true">1.2.</strong> Cilium install</a></li><li class="chapter-item expanded "><a href="../cloud-native/kubevirtci-for-chinanet.html"><strong aria-hidden="true">1.3.</strong> KubeVirt CI adapts to China's network</a></li><li class="chapter-item expanded "><a href="../cloud-native/web-terminal.html"><strong aria-hidden="true">1.4.</strong> Web Terminal</a></li><li class="chapter-item expanded "><a href="../cloud-native/deploy-kubevirt.html"><strong aria-hidden="true">1.5.</strong> Deploy Kubernetes + KubeVirt and the basic use of KubeVirt</a></li><li class="chapter-item expanded "><a href="../cloud-native/docker-java-demo.html"><strong aria-hidden="true">1.6.</strong> docker hello-world project</a></li><li class="chapter-item expanded "><a href="../cloud-native/deploy-cinder-csi-plugin.html"><strong aria-hidden="true">1.7.</strong> Several problems encountered in deploying cinder-csi-plugin</a></li><li class="chapter-item expanded "><a href="../cloud-native/go1.18-workspace.html"><strong aria-hidden="true">1.8.</strong> New in Go 1.18 - Workspaces</a></li><li class="chapter-item expanded "><a href="../cloud-native/spring-boot-async-demo.html"><strong aria-hidden="true">1.9.</strong> spring-boot asynchronous example</a></li><li class="chapter-item expanded "><a href="../cloud-native/plg.html"><strong aria-hidden="true">1.10.</strong> PLG implements Kubernetes Pod log collection and display</a></li><li class="chapter-item expanded "><a href="../cloud-native/fluentd.html"><strong aria-hidden="true">1.11.</strong> Fluentd implements Kubernetes Pod log collection</a></li><li class="chapter-item expanded "><a href="../cloud-native/java-dev-memo-1.html"><strong aria-hidden="true">1.12.</strong> Little records in Java project development (1)</a></li><li class="chapter-item expanded "><a href="../cloud-native/jdk-bug.html"><strong aria-hidden="true">1.13.</strong> JDK bug - Encrypt Private Key failed unrecognized algorithm name PBEWithSHA1AndDESede</a></li><li class="chapter-item expanded "><a href="../cloud-native/tenant-cmp.html"><strong aria-hidden="true">1.14.</strong> Implementation of the function of creating resource pool tenants on the cloud management platform</a></li><li class="chapter-item expanded "><a href="../cloud-native/test-service-performance-2.html"><strong aria-hidden="true">1.15.</strong> iperf3 tests the four-layer performance of Kubernetes Service (Part 2)</a></li><li class="chapter-item expanded "><a href="../cloud-native/test-service-performance-1.html"><strong aria-hidden="true">1.16.</strong> iperf3 tests the four-layer performance of Kubernetes Service (Part 1)</a></li><li class="chapter-item expanded "><a href="../cloud-native/k8s-cmd.html"><strong aria-hidden="true">1.17.</strong> k8s common command</a></li><li class="chapter-item expanded "><a href="../cloud-native/cpu-binding.html"><strong aria-hidden="true">1.18.</strong> k8s supports container core binding</a></li><li class="chapter-item expanded "><a href="../cloud-native/capability.html"><strong aria-hidden="true">1.19.</strong> k8s supports Capability mechanism</a></li><li class="chapter-item expanded "><a href="../cloud-native/oom.html"><strong aria-hidden="true">1.20.</strong> k8s OOMkilled container exceeding memory limit</a></li></ol></li><li class="chapter-item expanded "><a href="../SUMMARY.html"><strong aria-hidden="true">2.</strong> Catalog: Openstack</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../openstack/deploy-openstack-stein.html"><strong aria-hidden="true">2.1.</strong> Problems encountered in Openstack Stein deployment</a></li><li class="chapter-item expanded "><a href="../openstack/sriov2ovs.html"><strong aria-hidden="true">2.2.</strong> sriov computing node to ovs computing node script</a></li><li class="chapter-item expanded "><a href="../openstack/placement.html"><strong aria-hidden="true">2.3.</strong> Openstack Placement</a></li><li class="chapter-item expanded "><a href="../openstack/power-arch.html"><strong aria-hidden="true">2.4.</strong> POWER architecture server as computing node</a></li><li class="chapter-item expanded "><a href="../openstack/sriov.html"><strong aria-hidden="true">2.5.</strong> OpenStack practices SR-IOV computing nodes</a></li><li class="chapter-item expanded "><a href="../openstack/openstack-op-4.html"><strong aria-hidden="true">2.6.</strong> Openstack operation and maintenance records (4)</a></li><li class="chapter-item expanded "><a href="../openstack/openstack-op-3.html"><strong aria-hidden="true">2.7.</strong> Openstack operation and maintenance records (3)</a></li><li class="chapter-item expanded "><a href="../openstack/openstack-op-2.html"><strong aria-hidden="true">2.8.</strong> Openstack operation and maintenance records (2)</a></li><li class="chapter-item expanded "><a href="../openstack/openstack-op-1.html"><strong aria-hidden="true">2.9.</strong> Openstack operation and maintenance records (1)</a></li><li class="chapter-item expanded "><a href="../openstack/novnc-problem.html"><strong aria-hidden="true">2.10.</strong> OpenStack Pike dashboard noVNC cannot be accessed problem</a></li><li class="chapter-item expanded "><a href="../openstack/openstack-local-yum.html"><strong aria-hidden="true">2.11.</strong> Openstack Pike local yum source construction</a></li><li class="chapter-item expanded "><a href="../openstack/cpu-binding.html"><strong aria-hidden="true">2.12.</strong> CPU binding</a></li><li class="chapter-item expanded "><a href="../openstack/resize-fail.html"><strong aria-hidden="true">2.13.</strong> Investigation of the cause of resize failure</a></li><li class="chapter-item expanded "><a href="../openstack/mount-cloud-disk.html"><strong aria-hidden="true">2.14.</strong> Mount cloud disk</a></li><li class="chapter-item expanded "><a href="../openstack/ocata-nova-evacuate-bug.html"><strong aria-hidden="true">2.15.</strong> Ocata nova evacuate bug</a></li><li class="chapter-item expanded "><a href="../openstack/compute-node-ha.html"><strong aria-hidden="true">2.16.</strong> compute node ha mainstream open source implementation</a></li><li class="chapter-item expanded "><a href="../openstack/collectd-influxdb.html"><strong aria-hidden="true">2.17.</strong> Deployment and usage of Collectd and InfluxDB</a></li><li class="chapter-item expanded "><a href="../openstack/live-migration-local.html"><strong aria-hidden="true">2.18.</strong> Live Migration on Local Storage</a></li><li class="chapter-item expanded "><a href="../openstack/fast-evacuation.html"><strong aria-hidden="true">2.19.</strong> Add fast evacuation function to VM HA procedure</a></li><li class="chapter-item expanded "><a href="../openstack/vm-activation-failure.html"><strong aria-hidden="true">2.20.</strong> Windows virtual machine activation failure problem</a></li></ol></li><li class="chapter-item expanded "><a href="../SUMMARY.html"><strong aria-hidden="true">3.</strong> Catalog: Point of view</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../point-of-view/huawei-and-operators.html"><strong aria-hidden="true">3.1.</strong> Huawei and telecom operators</a></li></ol></li><li class="chapter-item expanded "><a href="../SUMMARY.html"><strong aria-hidden="true">4.</strong> Open source small project</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../open-source-small-project/firewall-tool.html"><strong aria-hidden="true">4.1.</strong> Open source a node.js firewall tool</a></li></ol></li><li class="chapter-item expanded "><a href="../SUMMARY.html"><strong aria-hidden="true">5.</strong> Catalog: Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tools/github-action.html"><strong aria-hidden="true">5.1.</strong> Github Action Supplementary Introduction</a></li><li class="chapter-item expanded "><a href="../tools/blog-cicd.html" class="active"><strong aria-hidden="true">5.2.</strong> Github Action Upgrade backend cloud website CICD process</a></li><li class="chapter-item expanded "><a href="../tools/github-action-demo.html"><strong aria-hidden="true">5.3.</strong> Try the Github Action CI/CD process (create a React project and package it for deployment)</a></li><li class="chapter-item expanded "><a href="../tools/notion-widget.html"><strong aria-hidden="true">5.4.</strong> Notion's page insert widget Widget</a></li><li class="chapter-item expanded "><a href="../tools/git-dir.html"><strong aria-hidden="true">5.5.</strong> Internal structure of .git directory</a></li><li class="chapter-item expanded "><a href="../tools/xshell-skill.html"><strong aria-hidden="true">5.6.</strong> Some Skills of using xshell tools</a></li><li class="chapter-item expanded "><a href="../tools/gerrit-install.html"><strong aria-hidden="true">5.7.</strong> gerrit install</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">English version of the website https://www.backendcloud.cn/</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <p>release time :2022-04-03 00:17</p>
<h1 id="cicd-program-upgrade"><a class="header" href="#cicd-program-upgrade">CICD program upgrade</a></h1>
<p>In the past, the blog update method was: execute hexo g -d, compile and deploy to Alibaba Cloud, and git version management push to Github.</p>
<p>Since I tried Github Action last time, I feel that I should keep up with the technology trend and use Github Action to complete CICD automation. In fact, the efficiency did not improve afterwards, but dropped, because the hexo g -dcompilation and deployment took a total of one or two seconds. Switching to the new process only saves hexo g -dthis step, leaving only push to Github, but it takes about 30 to 60 seconds for Github Action to automatically execute this process.</p>
<p>It used to take 2 seconds to see the effect of the blog update, but now it takes nearly 1 minute to see it. In terms of convenience and efficiency, there is no optimization, but the process is greatly upgraded. The CICD idea has obvious advantages in large-scale projects. And the node environment can be used locally, and hexo does not need to be installed. It is especially convenient to switch between multiple computers and multiple environments, and it is convenient for multiple people to edit collaboratively.</p>
<p>Three CICD upgrade options:</p>
<ol>
<li>CI process of the Hexo code warehouse: monitor the push to the static directory public, then use rsync to synchronize the nginx html directory of Alibaba Cloud. This approach also requires local execution hexo g.</li>
<li>Hexo code warehouse CI process: monitor the source file folder has a push, then deploy the node environment, install hexo, install the local package, execute hexo g -d, and deploy to the nginx html directory of Alibaba Cloud through hexo rsync.</li>
<li>The ultimate solution, dual code warehouse, hexo code warehouse and static web page code warehouse. CI process of the Hexo code warehouse: Monitor the source file folder for push, then deploy the node environment, install hexo, install the local package, execute hexo g -d, deploy to the Github static web warehouse through hexo git and trigger the CI process of the static web warehouse: deploy through rsync Go to the nginx html directory of Alibaba Cloud.</li>
</ol>
<blockquote>
<p>The advantage of dual warehouses is that the hexo framework is separated from the static web page, and the unblocking of Github may come one day. You can replace a domestic cloud service provider with Github static web page service at any time. The second code warehouse also tosses the CICD process to deploy to Alibaba Cloud for this reason: for domestic acceleration</p>
</blockquote>
<p>Since scheme 3 already includes all the implementations of 1 and 2, scheme 3 will be introduced.</p>
<h1 id="hexo-code-warehouse-cicd-configuration"><a class="header" href="#hexo-code-warehouse-cicd-configuration">Hexo code warehouse CICD configuration</a></h1>
<pre><code class="language-yaml">name: HEXO CI

#Invalid workflow file: .github/workflows/ci.yml#L1
#  you may only define one of `paths` and `paths-ignore` for a single event
on:
  push:
    branches:
      - master 
    paths-ignore: 
      - README.md
      - LICENSE

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [16.x]

    steps:
      - uses: actions/checkout@v1

      - name: Use Node.js ${{ matrix.node-version }}
        uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node-version }}

      - name: Configuration environment
        env:
          HEXO_DEPLOY_PRI: ${{ secrets.DEPLOY_KEY }}
        run: |
          mkdir -p ~/.ssh/
          echo &quot;$HEXO_DEPLOY_PRI&quot; &gt; ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts
          git config --global user.name &quot;hanwei&quot;
          git config --global user.email &quot;backendcloud@gmail.com&quot;
      - name: Install dependencies
        run: |
          npm i -g hexo-cli
          npm i
          npm install hexo-deployer-git --save
      - name: Deploy hexo
        run: |
          hexo clean &amp;&amp; hexo generate
          mkdir -p ./public/.github/workflows
          cp ./backendcloud.github.io.ci.yml ./public/.github/workflows/ci.yml
          hexo deploy
</code></pre>
<h1 id="static-web-page-code-warehouse-cicd-configuration"><a class="header" href="#static-web-page-code-warehouse-cicd-configuration">Static web page code warehouse CICD configuration</a></h1>
<pre><code class="language-yaml">name: Deploy site files

on:
  push:
    branches:
      - master 
    paths-ignore: 
      - README.md
      - LICENSE

jobs:
  deploy:
    runs-on: ubuntu-latest 

    steps: 
      - uses: actions/checkout@v2

      - name: Deploy to Server 
        uses: AEnterprise/rsync-deploy@v1.0 
        env:
          DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }} 
          ARGS: -avz --delete --exclude='*.pyc'
          SERVER_PORT: &quot;22&quot; # SSH端口
          FOLDER: ./ 
          SERVER_IP: ${{ secrets.SSH_HOST }}
          USERNAME: root 
          SERVER_DESTINATION: /usr/share/nginx/html/backendcloud/www/
      - name: Restart server # 第三步，重启服务
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.SSH_HOST }} 
          username: root
          key: ${{ secrets.DEPLOY_KEY }}
          script: |
            rm -rf /usr/share/nginx/html/backendcloud/www/.git*
</code></pre>
<p>Hexo git deployconfiguration</p>
<pre><code>deploy:
type: git
repo: git@github.com:backendcloud/backendcloud.github.io.git
# example, https://github.com/hexojs/hexojs.github.io
branch: master
ignore_hidden:
    public: false
</code></pre>
<h1 id="run-through-the-pits-encountered-along-the-way"><a class="header" href="#run-through-the-pits-encountered-along-the-way">Run through the pits encountered along the way</a></h1>
<h2 id="paths-ignore-and-paths-cannot-exist-at-the-same-time"><a class="header" href="#paths-ignore-and-paths-cannot-exist-at-the-same-time">paths-ignore and paths cannot exist at the same time.</a></h2>
<pre><code class="language-yaml">on:
  push:
    branches:
      - master 
    paths-ignore: 
      - README.md
      - LICENSE
    paths: 
      - './source/_posts/**'
</code></pre>
<p>/images/blog-cicd</p>
<p><img src="2023-01-19-13-42-56.png" alt="" /></p>
<pre><code>Invalid workflow file: .github/workflows/ci.yml#L1
you may only define one of `paths` and `paths-ignore` for a single event
</code></pre>
<h2 id="the-wrong-open-source-component-was-selected-in-the-rsync-use-market"><a class="header" href="#the-wrong-open-source-component-was-selected-in-the-rsync-use-market">The wrong open source component was selected in the rsync use market</a></h2>
<p>burnett01/rsync-deployments@5.2 I don't know where is the problem</p>
<p><img src="2023-01-19-13-43-22.png" alt="" /></p>
<p>Use changed a: AEnterprise/rsync-deploy@v1.0 immediately normal.</p>
<h2 id="hexo-git-not-found"><a class="header" href="#hexo-git-not-found">hexo git not found</a></h2>
<p><img src="2023-01-19-13-43-45.png" alt="" /></p>
<p>need to be in</p>
<ul>
<li>name: Install dependencies
run: |
npm i -g hexo-cli
npm i
- name: Deploy hexo
run: |
hexo clean &amp;&amp; hexo generate</li>
</ul>
<p>add onenpm install hexo-deployer-git --save</p>
<ul>
<li>name: Install dependencies
run: |
npm i -g hexo-cli
npm i
npm install hexo-deployer-git --save
- name: Deploy hexo
run: |
hexo clean &amp;&amp; hexo generate</li>
</ul>
<h2 id="there-is-no-permission-to-push-to-the-static-web-repository"><a class="header" href="#there-is-no-permission-to-push-to-the-static-web-repository">There is no permission to push to the static web repository</a></h2>
<p><img src="2023-01-19-13-44-24.png" alt="" /></p>
<p>You need to configure the public key in the Github warehouse Settingslabel of the static web page. The public key needs to be consistent with the private key in the container in the github action.</p>
<h2 id="pushing-to-the-static-web-repository-is-normal-github-can-see-the-latest-pushed-code-repository-but-the-ci-configuration-file-of-the-repository-is-always-missing"><a class="header" href="#pushing-to-the-static-web-repository-is-normal-github-can-see-the-latest-pushed-code-repository-but-the-ci-configuration-file-of-the-repository-is-always-missing">Pushing to the static web repository is normal, Github can see the latest pushed code repository, but the CI configuration file of the repository is always missing</a></h2>
<p><img src="2023-01-19-13-44-38.png" alt="" /></p>
<ul>
<li>name: Deploy hexo
run: |
hexo clean &amp;&amp; hexo generate
mkdir -p ./public/.github/workflows
cp ./backendcloud.github.io.ci.yml ./public/.github/workflows/ci.yml
hexo deploy</li>
</ul>
<p>The CI configuration file of the Hexo code warehouse has a copy-write command, but the static web page code warehouse cannot always be found. After debugging several times, it was confirmed that there is no problem with the code. After debugging, it is found that non-hidden files can be seen, but hidden files cannot be seen. I wonder if hexo git will not push to hidden files by default. Go to the open source hexo git to check, sure enough.</p>
<blockquote>
<p>https://github.com/hexojs/hexo-deployer-git</p>
</blockquote>
<p>Hexo git deployconfig from below</p>
<pre><code>deploy:
type: git
repo: git@github.com:backendcloud/backendcloud.github.io.git
# example, https://github.com/hexojs/hexojs.github.io
branch: master
</code></pre>
<p>changed to</p>
<pre><code>deploy:
type: git
repo: git@github.com:backendcloud/backendcloud.github.io.git
# example, https://github.com/hexojs/hexojs.github.io
branch: master
ignore_hidden:
    public: false
</code></pre>
<p>everything is normal.</p>
<p>Another place stepped on a small hole:</p>
<p>these two sentences</p>
<pre><code>mkdir -p ./public/.github/workflows
cp ./backendcloud.github.io.ci.yml ./public/.github/workflows/ci.yml
</code></pre>
<p>It cannot be placed hexo clean &amp;&amp; hexo generatebefore, only after. Because hexo clean will empty the publicfolder.</p>
<p>So far, the three Github Action CICD process of the dual code warehouse has completely run through.</p>
<p><img src="2023-01-19-13-45-49.png" alt="" /></p>
<p><img src="2023-01-19-13-45-55.png" alt="" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../tools/github-action.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../tools/github-action-demo.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../tools/github-action.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../tools/github-action-demo.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../sidebar.js"></script>
    </body>
</html>